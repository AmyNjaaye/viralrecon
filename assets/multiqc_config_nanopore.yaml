report_comment: >
    This report has been generated by the <a href="https://github.com/nf-core/viralrecon" target="_blank">nf-core/viralrecon</a>
    analysis pipeline. For information about how to interpret these results, please see the
    <a href="https://github.com/nf-core/viralrecon" target="_blank">documentation</a>.

data_format: 'yaml'

run_modules:
    - custom_content
    - pycoqc
    - samtools
    - bcftools
    - mosdepth
    - snpeff
    - quast

exclude_modules:
    - 'general_stats'

module_order:
    - pycoqc
    - samtools:
        path_filters:
            - './samtools_stats/*'
    - mosdepth
    - bcftools:
        path_filters:
            - './bcftools_stats/*.txt'
    - snpeff:
        path_filters:
            - './snpeff/*.csv'
    - quast:
        path_filters:
            - './quast/*.tsv'

report_section_order:
    software_versions:
        order: -1001
    nf-core-viralrecon-summary:
        order: -1002

bcftools:
    collapse_complementary_changes: true

extra_fn_clean_exts:
    - '.consensus'
    - '.pass'
    - '.mapped'
    - '.snpeff'

# See https://github.com/ewels/MultiQC_TestData/blob/master/data/custom_content/with_config/table_headerconfig/multiqc_config.yaml
custom_data:
    fail_barcodes_no_sample:
        section_name: 'WARNING: Barcodes without sample id'
        description: "List of barcodes that appear to have reads in the '--fastq_dir' folder but were not specified in mappings samplesheet via '--input'."
        plot_type: 'table'
        pconfig:
            id: 'fail_barcodes_no_sample_table'
            table_title: 'Barcodes without sample id'
            namespace: 'Barcodes without sample id'
            format: '{:,.0f}'
    fail_no_barcode_samples:
        section_name: 'WARNING: No barcode'
        description: "List of samples that were specified in mappings samplesheet via '--input' but didn't have an associated barcode in the '--fastq_dir' folder."
        plot_type: 'table'
        pconfig:
            id: 'fail_no_barcode_samples_table'
            table_title: 'Sample ids without barcode'
            namespace: 'Sample ids without barcode'
    fail_barcode_count_samples:
        section_name: 'WARNING: Fail barcode read count'
        description: "Samples that failed the minimum number of reads required per barcode specified via the '--min_barcode_reads' parameter, and hence were ignored for the downstream processing steps."
        plot_type: 'bargraph'
        pconfig:
            id: 'fail_barcode_count_samples_table'
            table_title: 'Samples failed barcode read count threshold'
            namespace: 'Samples failed barcode read count threshold'
            format: '{:,.0f}'
    fail_guppyplex_count_samples:
        section_name: 'WARNING: Fail guppyplex read count'
        description: "Samples that failed the minimum number of reads required per sample specified via the '--min_guppyplex_reads' parameter, and hence were ignored for the downstream processing steps."
        plot_type: 'bargraph'
        pconfig:
            id: 'fail_guppyplex_count_samples_table'
            table_title: 'Samples failed artic guppyplex read count threshold'
            namespace: 'Samples failed artic guppyplex read count threshold'
            format: '{:,.0f}'
    summary_variants_metrics:
        section_name: 'Variant calling metrics'
        description: 'generated by the nf-core/viralrecon pipeline'
        plot_type: 'table'
        headers:            
            '# Mapped reads':
                description: 'Total number of mapped reads relative to the viral genome'
                format: '{:,.0f}'
            'Coverage median':
                description: 'Median coverage calculated by mosdepth'
                format: '{:,.1f}'
            '% Coverage > 1x':
                description: 'Coverage > 1x calculated by mosdepth'
                format: '{:,.1f}'
            '% Coverage > 10x':
                description: 'Coverage > 10x calculated by mosdepth'
                format: '{:,.1f}'
            '# Ns per 100kb consensus':
                description: 'Number of N bases per 100kb in consensus sequence generated by artic minion'
                format: '{:,.2f}'
            '# SNPs':
                description: 'Total number of SNPs called by artic minion that pass quality filters'
                format: '{:,.0f}'
            '# INDELs':
                description: 'Total number of INDELs called by artic minion that pass quality filters'
                format: '{:,.0f}'
            '# Missense variants':
                description: 'Total number of missense mutations identified by variant annotation with SnpEff'
                format: '{:,.0f}'
        pconfig:
            id: 'summary_variants_metrics_plot_table'
            table_title: 'Variant calling metrics'
            namespace: 'Variant calling metrics'
            only_defined_headers: False
            format: '{:,.0f}'
            
# # Customise the module search patterns to speed up execution time
# #  - Skip module sub-tools that we are not interested in
# #  - Replace file-content searching with filename pattern searching
# #  - Don't add anything that is the same as the MultiQC default
# # See https://multiqc.info/docs/#optimise-file-search-patterns for details
sp:
    mosdepth/global_dist:
        fn: '*.global.dist.txt'
