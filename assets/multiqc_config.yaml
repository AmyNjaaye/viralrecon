report_comment: >
    This report has been generated by the <a href="https://github.com/nf-core/viralrecon" target="_blank">nf-core/viralrecon</a>
    analysis pipeline. For information about how to interpret these results, please see the
    <a href="https://github.com/nf-core/viralrecon" target="_blank">documentation</a>.

export_plots: true

run_modules:
    - custom_content
    - fastqc
    - fastp
    - bowtie2
    - samtools
    - picard
    - bcftools
    - snpeff
    - quast
    - cutadapt
    #- ivar
    #- varscan2

module_order:
    - fastqc:
        name: 'PREPROCESS: FastQC (raw reads)'
        info: 'This section of the report shows FastQC results for the raw reads before adapter trimming.'
        path_filters:
            - './fastqc/*'
    - fastp:
        name: 'PREPROCESS: fastp (adapter trimming)'
        info: 'This section of the report shows fastp results for reads after adapter and quality trimming.'
        path_filters:
            - './fastp/log/*'
    - fastqc:
        name: 'PREPROCESS: FastQC (adapter trimming)'
        info: 'This section of the report shows FastQC results for reads after adapter and quality trimming.'
        path_filters:
            - './fastp/fastqc/*'
    - bowtie2:
        name: 'VARIANTS: Bowtie 2'
        info: 'This section of the report shows Bowtie 2 mapping results for reads after adapter trimming and quality trimming.'
        path_filters:
            - './bowtie2/log/*'
    - samtools:
        name: 'VARIANTS: SAMTools (raw)'
        info: 'This section of the report shows SAMTools counts/statistics after mapping with Bowtie 2.'
        path_filters:
            - './bowtie2/flagstat/*'
    - samtools:
        name: 'VARIANTS: SAMTools (iVar)'
        info: 'This section of the report shows SAMTools counts/statistics after primer sequence removal with iVar.'
        path_filters:
            - './ivar/trim/flagstat/*'
    - samtools:
        name: 'VARIANTS: SAMTools (MarkDuplicates)'
        info: 'This section of the report shows SAMTools counts/statistics after duplicate removal with picard MarkDuplicates.'
        path_filters:
            - './picard/markdup/*'
    - picard:
        name: 'VARIANTS: Picard Metrics'
        info: 'This section of the report shows picard CollectMultipleMetrics and MarkDuplicates results after mapping (if "--protocol amplicon" this will be after primer sequence removal with iVar).'
        path_filters:
            - './picard/metrics/*'
    # - varscan2:
    #     name: 'VARIANTS: VarScan 2 variant counts'
    #     info: 'This section of the report shows number of variants called by VarScan 2.'
    #     path_filters:
    #         - './varscan2/counts/lowfreq/*'
    - bcftools:
        name: 'VARIANTS: BCFTools (VarScan 2; high freq)'
        info: 'This section of the report shows BCFTools stats results for high frequency variants called by VarScan 2. The allele frequency filtering threshold can be set by the --max_allele_freq parameter (Default: 0.8).'
        path_filters:
            - './varscan2/bcftools/highfreq/*'
    - snpeff:
        name: 'VARIANTS: SnpEff (VarScan 2; high freq)'
        info: 'This section of the report shows SnpEff results for high frequency variants called by VarScan 2. The allele frequency filtering threshold can be set by the --max_allele_freq parameter (Default: 0.8).'
        path_filters:
            - './varscan2/snpeff/highfreq/*'
    - quast:
        name: 'VARIANTS: QUAST (VarScan 2; high freq)'
        info: 'This section of the report shows QUAST results for consensus sequences generated from high frequency variants with VarScan 2. The allele frequency filtering threshold can be set by the --max_allele_freq parameter (Default: 0.8).'
        path_filters:
            - './varscan2/quast/highfreq/*'
    # - ivar:
    #     name: 'VARIANTS: iVar variant counts'
    #     info: 'This section of the report shows number of variants called by iVar.'
    #     path_filters:
    #         - './ivar/variants/counts/lowfreq/*'
    # - ivar:
    #     name: 'VARIANTS: iVar variant counts (high freq)'
    #     info: 'This section of the report shows number of high frequency variants called by iVar. The allele frequency filtering threshold can be set by the --max_allele_freq parameter (Default: 0.8).'
    #     path_filters:
    #         - './ivar/variants/counts/highfreq/*'
    - bcftools:
        name: 'VARIANTS: BCFTools (iVar; high freq)'
        info: 'This section of the report shows BCFTools stats results for high frequency variants called by iVar. The allele frequency filtering threshold can be set by the --max_allele_freq parameter (Default: 0.8).'
        path_filters:
            - './ivar/variants/bcftools/highfreq/*'
    - snpeff:
        name: 'VARIANTS: SnpEff (iVar; high freq)'
        info: 'This section of the report shows SnpEff results for high frequency variants called by iVar. The allele frequency filtering threshold can be set by the --max_allele_freq parameter (Default: 0.8).'
        path_filters:
            - './ivar/variants/snpeff/highfreq/*'
    - quast:
        name: 'VARIANTS: QUAST (iVar; high freq)'
        info: 'This section of the report shows QUAST results for consensus sequences generated from high frequency variants with iVar. The allele frequency filtering threshold can be set by the --max_allele_freq parameter (Default: 0.8).'
        path_filters:
            - './ivar/consensus/quast/highfreq/*'
    - bcftools:
        name: 'VARIANTS: BCFTools (BCFTools)'
        info: 'This section of the report shows BCFTools stats results for variants called by BCFTools.'
        path_filters:
            - './bcftools/variants/bcftools/*'
    - snpeff:
        name: 'VARIANTS: SnpEff (BCFTools)'
        info: 'This section of the report shows SnpEff results for variants called by BCFTools.'
        path_filters:
            - './bcftools/variants/snpeff/*'
    - quast:
        name: 'VARIANTS: QUAST (BCFTools)'
        info: 'This section of the report shows QUAST results for consensus sequence generated from BCFTools variants.'
        path_filters:
            - './bcftools/consensus/quast/*'
    - cutadapt:
        name: 'ASSEMBLY: Cutadapt (primer trimming)'
        info: 'This section of the report shows Cutadapt results for reads after primer sequence trimming.'
        path_filters:
            - './cutadapt/log/*'
    - fastqc:
        name: 'ASSEMBLY: FastQC (primer trimming)'
        info: 'This section of the report shows FastQC results for reads after primer sequence trimming with Cutadapt.'
        path_filters:
            - './cutadapt/fastqc/*'
    - quast:
        name: 'ASSEMBLY: QUAST (SPAdes)'
        info: 'This section of the report shows QUAST results from SPAdes de novo assembly.'
        path_filters:
            - './spades/quast/*'
    - bcftools:
        name: 'ASSEMBLY: BCFTools (SPAdes)'
        info: 'This section of the report shows BCFTools stats results for variants called in the SPAdes assembly relative to the reference.'
        path_filters:
            - './spades/bcftools/*'
    - snpeff:
        name: 'ASSEMBLY: SnpEff (SPAdes)'
        info: 'This section of the report shows SnpEff results for variants called in the SPAdes assembly relative to the reference.'
        path_filters:
            - './spades/snpeff/*'
    - quast:
        name: 'ASSEMBLY: QUAST (MetaSPAdes)'
        info: 'This section of the report shows QUAST results from MetaSPAdes de novo assembly.'
        path_filters:
            - './metaspades/quast/*'
    - bcftools:
        name: 'ASSEMBLY: BCFTools (MetaSPAdes)'
        info: 'This section of the report shows BCFTools stats results for variants called in the MetaSPAdes assembly relative to the reference.'
        path_filters:
            - './metaspades/bcftools/*'
    - snpeff:
        name: 'ASSEMBLY: SnpEff (MetaSPAdes)'
        info: 'This section of the report shows SnpEff results for variants called in the MetaSPAdes assembly relative to the reference.'
        path_filters:
            - './metaspades/snpeff/*'
    - quast:
        name: 'ASSEMBLY: QUAST (Unicycler)'
        info: 'This section of the report shows QUAST results from Unicycler de novo assembly.'
        path_filters:
            - './unicycler/quast/*'
    - bcftools:
        name: 'ASSEMBLY: BCFTools (Unicycler)'
        info: 'This section of the report shows BCFTools stats results for variants called in the Unicycler assembly relative to the reference.'
        path_filters:
            - './unicycler/bcftools/*'
    - snpeff:
        name: 'ASSEMBLY: SnpEff (Unicycler)'
        info: 'This section of the report shows SnpEff results for variants called in the Unicycler assembly relative to the reference.'
        path_filters:
            - './unicycler/snpeff/*'
    - quast:
        name: 'ASSEMBLY: QUAST (minia)'
        info: 'This section of the report shows QUAST results from minia de novo assembly.'
        path_filters:
            - './minia/quast/*'
    - bcftools:
        name: 'ASSEMBLY: BCFTools (minia)'
        info: 'This section of the report shows BCFTools stats results for variants called in the minia assembly relative to the reference.'
        path_filters:
            - './minia/bcftools/*'
    - snpeff:
        name: 'ASSEMBLY: SnpEff (minia)'
        info: 'This section of the report shows SnpEff results for variants called in the minia assembly relative to the reference.'
        path_filters:
            - './minia/snpeff/*'

report_section_order:
    ivar_variants:
        order: -1000
    software_versions:
        order: -1001
    nf-core-viralrecon-summary:
        order: -1002

custom_plot_config:
    picard-insertsize:
        cpswitch_c_active: False
        smooth_points: 1000

bcftools:
    collapse_complementary_changes: true

extra_fn_clean_exts:
     - '.trim'
     - '.bowtie2'
     - '.mkD'
     - '.ptrim'
     - '.highfreq'
     - '.lowfreq'
     - '.consensus'
     - '.snpEff'
     - '.scaffolds'
     - type: regex
       pattern: '.[k][0-9]+.*'
     - type: regex
       pattern: '.[AF][0-9]+*'
